{
 "Description": "SpaceX Launches FullStack Application",
 "Resources": {
  "SpaceXLaunchesTableA86A4AE4": {
   "Type": "AWS::DynamoDB::Table",
   "Properties": {
    "AttributeDefinitions": [
     {
      "AttributeName": "launch_id",
      "AttributeType": "S"
     },
     {
      "AttributeName": "launch_date",
      "AttributeType": "S"
     }
    ],
    "BillingMode": "PAY_PER_REQUEST",
    "KeySchema": [
     {
      "AttributeName": "launch_id",
      "KeyType": "HASH"
     },
     {
      "AttributeName": "launch_date",
      "KeyType": "RANGE"
     }
    ],
    "TableName": "spacex-launches"
   },
   "UpdateReplacePolicy": "Delete",
   "DeletionPolicy": "Delete",
   "Metadata": {
    "aws:cdk:path": "SpaceXFullStack/SpaceXLaunchesTable/Resource"
   }
  },
  "SpaceXDataProcessorServiceRole5F5233D9": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "lambda.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "ManagedPolicyArns": [
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
       ]
      ]
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "SpaceXFullStack/SpaceXDataProcessor/ServiceRole/Resource"
   }
  },
  "SpaceXDataProcessorServiceRoleDefaultPolicy1CF4FE33": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "dynamodb:BatchGetItem",
        "dynamodb:BatchWriteItem",
        "dynamodb:ConditionCheckItem",
        "dynamodb:DeleteItem",
        "dynamodb:DescribeTable",
        "dynamodb:GetItem",
        "dynamodb:GetRecords",
        "dynamodb:GetShardIterator",
        "dynamodb:PutItem",
        "dynamodb:Query",
        "dynamodb:Scan",
        "dynamodb:UpdateItem"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "SpaceXLaunchesTableA86A4AE4",
          "Arn"
         ]
        },
        {
         "Ref": "AWS::NoValue"
        }
       ]
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "SpaceXDataProcessorServiceRoleDefaultPolicy1CF4FE33",
    "Roles": [
     {
      "Ref": "SpaceXDataProcessorServiceRole5F5233D9"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "SpaceXFullStack/SpaceXDataProcessor/ServiceRole/DefaultPolicy/Resource"
   }
  },
  "SpaceXDataProcessor565DFC9E": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Code": {
     "S3Bucket": {
      "Fn::Sub": "cdk-hnb659fds-assets-${AWS::AccountId}-us-east-1"
     },
     "S3Key": "ced0223e83f1248921f4dcdb523aa3a04e277140be2255333583da79806f45a6.zip"
    },
    "Environment": {
     "Variables": {
      "TABLE_NAME": {
       "Ref": "SpaceXLaunchesTableA86A4AE4"
      }
     }
    },
    "FunctionName": "spacex-data-processor",
    "Handler": "lambda_function.lambda_handler",
    "Role": {
     "Fn::GetAtt": [
      "SpaceXDataProcessorServiceRole5F5233D9",
      "Arn"
     ]
    },
    "Runtime": "python3.12",
    "Timeout": 300
   },
   "DependsOn": [
    "SpaceXDataProcessorServiceRoleDefaultPolicy1CF4FE33",
    "SpaceXDataProcessorServiceRole5F5233D9"
   ],
   "Metadata": {
    "aws:cdk:path": "SpaceXFullStack/SpaceXDataProcessor/Resource",
    "aws:asset:path": "asset.ced0223e83f1248921f4dcdb523aa3a04e277140be2255333583da79806f45a6",
    "aws:asset:is-bundled": false,
    "aws:asset:property": "Code"
   }
  },
  "ScheduledRuleAC380132": {
   "Type": "AWS::Events::Rule",
   "Properties": {
    "ScheduleExpression": "rate(6 hours)",
    "State": "ENABLED",
    "Targets": [
     {
      "Arn": {
       "Fn::GetAtt": [
        "SpaceXDataProcessor565DFC9E",
        "Arn"
       ]
      },
      "Id": "Target0"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "SpaceXFullStack/ScheduledRule/Resource"
   }
  },
  "ScheduledRuleAllowEventRuleSpaceXFullStackSpaceXDataProcessor8998D8DECF548D57": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "SpaceXDataProcessor565DFC9E",
      "Arn"
     ]
    },
    "Principal": "events.amazonaws.com",
    "SourceArn": {
     "Fn::GetAtt": [
      "ScheduledRuleAC380132",
      "Arn"
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "SpaceXFullStack/ScheduledRule/AllowEventRuleSpaceXFullStackSpaceXDataProcessor8998D8DE"
   }
  },
  "AppVPCB7733741": {
   "Type": "AWS::EC2::VPC",
   "Properties": {
    "CidrBlock": "10.0.0.0/16",
    "EnableDnsHostnames": true,
    "EnableDnsSupport": true,
    "InstanceTenancy": "default",
    "Tags": [
     {
      "Key": "Name",
      "Value": "SpaceXFullStack/AppVPC"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "SpaceXFullStack/AppVPC/Resource"
   }
  },
  "AppVPCPublicSubnet1Subnet5EAE38B2": {
   "Type": "AWS::EC2::Subnet",
   "Properties": {
    "AvailabilityZone": {
     "Fn::Select": [
      0,
      {
       "Fn::GetAZs": ""
      }
     ]
    },
    "CidrBlock": "10.0.0.0/24",
    "MapPublicIpOnLaunch": true,
    "Tags": [
     {
      "Key": "aws-cdk:subnet-name",
      "Value": "Public"
     },
     {
      "Key": "aws-cdk:subnet-type",
      "Value": "Public"
     },
     {
      "Key": "Name",
      "Value": "SpaceXFullStack/AppVPC/PublicSubnet1"
     }
    ],
    "VpcId": {
     "Ref": "AppVPCB7733741"
    }
   },
   "Metadata": {
    "aws:cdk:path": "SpaceXFullStack/AppVPC/PublicSubnet1/Subnet"
   }
  },
  "AppVPCPublicSubnet1RouteTable63382DC5": {
   "Type": "AWS::EC2::RouteTable",
   "Properties": {
    "Tags": [
     {
      "Key": "Name",
      "Value": "SpaceXFullStack/AppVPC/PublicSubnet1"
     }
    ],
    "VpcId": {
     "Ref": "AppVPCB7733741"
    }
   },
   "Metadata": {
    "aws:cdk:path": "SpaceXFullStack/AppVPC/PublicSubnet1/RouteTable"
   }
  },
  "AppVPCPublicSubnet1RouteTableAssociation10038102": {
   "Type": "AWS::EC2::SubnetRouteTableAssociation",
   "Properties": {
    "RouteTableId": {
     "Ref": "AppVPCPublicSubnet1RouteTable63382DC5"
    },
    "SubnetId": {
     "Ref": "AppVPCPublicSubnet1Subnet5EAE38B2"
    }
   },
   "Metadata": {
    "aws:cdk:path": "SpaceXFullStack/AppVPC/PublicSubnet1/RouteTableAssociation"
   }
  },
  "AppVPCPublicSubnet1DefaultRoute51A04DF7": {
   "Type": "AWS::EC2::Route",
   "Properties": {
    "DestinationCidrBlock": "0.0.0.0/0",
    "GatewayId": {
     "Ref": "AppVPCIGW7D765419"
    },
    "RouteTableId": {
     "Ref": "AppVPCPublicSubnet1RouteTable63382DC5"
    }
   },
   "DependsOn": [
    "AppVPCVPCGW31CBD692"
   ],
   "Metadata": {
    "aws:cdk:path": "SpaceXFullStack/AppVPC/PublicSubnet1/DefaultRoute"
   }
  },
  "AppVPCPublicSubnet2Subnet19F05CAF": {
   "Type": "AWS::EC2::Subnet",
   "Properties": {
    "AvailabilityZone": {
     "Fn::Select": [
      1,
      {
       "Fn::GetAZs": ""
      }
     ]
    },
    "CidrBlock": "10.0.1.0/24",
    "MapPublicIpOnLaunch": true,
    "Tags": [
     {
      "Key": "aws-cdk:subnet-name",
      "Value": "Public"
     },
     {
      "Key": "aws-cdk:subnet-type",
      "Value": "Public"
     },
     {
      "Key": "Name",
      "Value": "SpaceXFullStack/AppVPC/PublicSubnet2"
     }
    ],
    "VpcId": {
     "Ref": "AppVPCB7733741"
    }
   },
   "Metadata": {
    "aws:cdk:path": "SpaceXFullStack/AppVPC/PublicSubnet2/Subnet"
   }
  },
  "AppVPCPublicSubnet2RouteTable3C9BB83A": {
   "Type": "AWS::EC2::RouteTable",
   "Properties": {
    "Tags": [
     {
      "Key": "Name",
      "Value": "SpaceXFullStack/AppVPC/PublicSubnet2"
     }
    ],
    "VpcId": {
     "Ref": "AppVPCB7733741"
    }
   },
   "Metadata": {
    "aws:cdk:path": "SpaceXFullStack/AppVPC/PublicSubnet2/RouteTable"
   }
  },
  "AppVPCPublicSubnet2RouteTableAssociationDB170019": {
   "Type": "AWS::EC2::SubnetRouteTableAssociation",
   "Properties": {
    "RouteTableId": {
     "Ref": "AppVPCPublicSubnet2RouteTable3C9BB83A"
    },
    "SubnetId": {
     "Ref": "AppVPCPublicSubnet2Subnet19F05CAF"
    }
   },
   "Metadata": {
    "aws:cdk:path": "SpaceXFullStack/AppVPC/PublicSubnet2/RouteTableAssociation"
   }
  },
  "AppVPCPublicSubnet2DefaultRouteC200D8E4": {
   "Type": "AWS::EC2::Route",
   "Properties": {
    "DestinationCidrBlock": "0.0.0.0/0",
    "GatewayId": {
     "Ref": "AppVPCIGW7D765419"
    },
    "RouteTableId": {
     "Ref": "AppVPCPublicSubnet2RouteTable3C9BB83A"
    }
   },
   "DependsOn": [
    "AppVPCVPCGW31CBD692"
   ],
   "Metadata": {
    "aws:cdk:path": "SpaceXFullStack/AppVPC/PublicSubnet2/DefaultRoute"
   }
  },
  "AppVPCIGW7D765419": {
   "Type": "AWS::EC2::InternetGateway",
   "Properties": {
    "Tags": [
     {
      "Key": "Name",
      "Value": "SpaceXFullStack/AppVPC"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "SpaceXFullStack/AppVPC/IGW"
   }
  },
  "AppVPCVPCGW31CBD692": {
   "Type": "AWS::EC2::VPCGatewayAttachment",
   "Properties": {
    "InternetGatewayId": {
     "Ref": "AppVPCIGW7D765419"
    },
    "VpcId": {
     "Ref": "AppVPCB7733741"
    }
   },
   "Metadata": {
    "aws:cdk:path": "SpaceXFullStack/AppVPC/VPCGW"
   }
  },
  "BackendRepository9B711290": {
   "Type": "AWS::ECR::Repository",
   "Properties": {
    "EmptyOnDelete": true,
    "RepositoryName": "spacex-backend"
   },
   "UpdateReplacePolicy": "Delete",
   "DeletionPolicy": "Delete",
   "Metadata": {
    "aws:cdk:path": "SpaceXFullStack/BackendRepository/Resource"
   }
  },
  "FrontendRepository7D714FA2": {
   "Type": "AWS::ECR::Repository",
   "Properties": {
    "EmptyOnDelete": true,
    "RepositoryName": "spacex-frontend"
   },
   "UpdateReplacePolicy": "Delete",
   "DeletionPolicy": "Delete",
   "Metadata": {
    "aws:cdk:path": "SpaceXFullStack/FrontendRepository/Resource"
   }
  },
  "AppCluster99B78AC1": {
   "Type": "AWS::ECS::Cluster",
   "Properties": {
    "ClusterName": "spacex-app-cluster"
   },
   "Metadata": {
    "aws:cdk:path": "SpaceXFullStack/AppCluster/Resource"
   }
  },
  "TaskExecutionRole250D2532": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "ecs-tasks.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "Description": "Role for ECS Task Execution",
    "ManagedPolicyArns": [
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AmazonECSTaskExecutionRolePolicy"
       ]
      ]
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "SpaceXFullStack/TaskExecutionRole/Resource"
   }
  },
  "TaskExecutionRoleDefaultPolicyA84DD1B0": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "ecr:BatchCheckLayerAvailability",
        "ecr:BatchGetImage",
        "ecr:GetDownloadUrlForLayer"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::Join": [
         "",
         [
          "arn:aws:ecr:us-east-1:",
          {
           "Ref": "AWS::AccountId"
          },
          ":repository/",
          {
           "Fn::Sub": "cdk-hnb659fds-container-assets-${AWS::AccountId}-us-east-1"
          }
         ]
        ]
       }
      },
      {
       "Action": "ecr:GetAuthorizationToken",
       "Effect": "Allow",
       "Resource": "*"
      },
      {
       "Action": [
        "logs:CreateLogStream",
        "logs:PutLogEvents"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "BackendTaskDefinitionBackendContainerLogGroup5E30F6E8",
          "Arn"
         ]
        },
        {
         "Fn::GetAtt": [
          "FrontendTaskDefinitionFrontendContainerLogGroup994ED50C",
          "Arn"
         ]
        }
       ]
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "TaskExecutionRoleDefaultPolicyA84DD1B0",
    "Roles": [
     {
      "Ref": "TaskExecutionRole250D2532"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "SpaceXFullStack/TaskExecutionRole/DefaultPolicy/Resource"
   }
  },
  "BackendTaskRole65DD5890": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "ecs-tasks.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "Description": "Role for Backend ECS Task"
   },
   "Metadata": {
    "aws:cdk:path": "SpaceXFullStack/BackendTaskRole/Resource"
   }
  },
  "BackendTaskRoleDefaultPolicyD82ED08E": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "dynamodb:BatchGetItem",
        "dynamodb:ConditionCheckItem",
        "dynamodb:DescribeTable",
        "dynamodb:GetItem",
        "dynamodb:GetRecords",
        "dynamodb:GetShardIterator",
        "dynamodb:Query",
        "dynamodb:Scan"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "SpaceXLaunchesTableA86A4AE4",
          "Arn"
         ]
        },
        {
         "Ref": "AWS::NoValue"
        }
       ]
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "BackendTaskRoleDefaultPolicyD82ED08E",
    "Roles": [
     {
      "Ref": "BackendTaskRole65DD5890"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "SpaceXFullStack/BackendTaskRole/DefaultPolicy/Resource"
   }
  },
  "BackendTaskDefinitionEC224DE6": {
   "Type": "AWS::ECS::TaskDefinition",
   "Properties": {
    "ContainerDefinitions": [
     {
      "Environment": [
       {
        "Name": "TABLE_NAME",
        "Value": {
         "Ref": "SpaceXLaunchesTableA86A4AE4"
        }
       },
       {
        "Name": "DEBUG",
        "Value": "False"
       },
       {
        "Name": "AWS_DEFAULT_REGION",
        "Value": "us-east-1"
       }
      ],
      "Essential": true,
      "Image": {
       "Fn::Sub": "${AWS::AccountId}.dkr.ecr.us-east-1.${AWS::URLSuffix}/cdk-hnb659fds-container-assets-${AWS::AccountId}-us-east-1:bbf47a15fe72a4b2c9f2ecd03c890e45b6e5ba0ddd5ed9914248092bbbd415cf"
      },
      "LogConfiguration": {
       "LogDriver": "awslogs",
       "Options": {
        "awslogs-group": {
         "Ref": "BackendTaskDefinitionBackendContainerLogGroup5E30F6E8"
        },
        "awslogs-stream-prefix": "Backend",
        "awslogs-region": "us-east-1"
       }
      },
      "Name": "BackendContainer",
      "PortMappings": [
       {
        "ContainerPort": 8000,
        "Protocol": "tcp"
       }
      ]
     }
    ],
    "Cpu": "256",
    "ExecutionRoleArn": {
     "Fn::GetAtt": [
      "TaskExecutionRole250D2532",
      "Arn"
     ]
    },
    "Family": "SpaceXFullStackBackendTaskDefinition618EE4F3",
    "Memory": "512",
    "NetworkMode": "awsvpc",
    "RequiresCompatibilities": [
     "FARGATE"
    ],
    "TaskRoleArn": {
     "Fn::GetAtt": [
      "BackendTaskRole65DD5890",
      "Arn"
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "SpaceXFullStack/BackendTaskDefinition/Resource"
   }
  },
  "BackendTaskDefinitionBackendContainerLogGroup5E30F6E8": {
   "Type": "AWS::Logs::LogGroup",
   "UpdateReplacePolicy": "Retain",
   "DeletionPolicy": "Retain",
   "Metadata": {
    "aws:cdk:path": "SpaceXFullStack/BackendTaskDefinition/BackendContainer/LogGroup/Resource"
   }
  },
  "FrontendTaskDefinitionTaskRole0DD17CB3": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "ecs-tasks.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    }
   },
   "Metadata": {
    "aws:cdk:path": "SpaceXFullStack/FrontendTaskDefinition/TaskRole/Resource"
   }
  },
  "FrontendTaskDefinition6CBC2B00": {
   "Type": "AWS::ECS::TaskDefinition",
   "Properties": {
    "ContainerDefinitions": [
     {
      "Essential": true,
      "Image": {
       "Fn::Sub": "${AWS::AccountId}.dkr.ecr.us-east-1.${AWS::URLSuffix}/cdk-hnb659fds-container-assets-${AWS::AccountId}-us-east-1:b0e1384c5cd7cf12e2aaf56b6373e7111d0d3ffebd20ec702dc06ff8163d6bd8"
      },
      "LogConfiguration": {
       "LogDriver": "awslogs",
       "Options": {
        "awslogs-group": {
         "Ref": "FrontendTaskDefinitionFrontendContainerLogGroup994ED50C"
        },
        "awslogs-stream-prefix": "Frontend",
        "awslogs-region": "us-east-1"
       }
      },
      "Name": "FrontendContainer",
      "PortMappings": [
       {
        "ContainerPort": 80,
        "Protocol": "tcp"
       }
      ]
     }
    ],
    "Cpu": "256",
    "ExecutionRoleArn": {
     "Fn::GetAtt": [
      "TaskExecutionRole250D2532",
      "Arn"
     ]
    },
    "Family": "SpaceXFullStackFrontendTaskDefinition5040BDFB",
    "Memory": "512",
    "NetworkMode": "awsvpc",
    "RequiresCompatibilities": [
     "FARGATE"
    ],
    "TaskRoleArn": {
     "Fn::GetAtt": [
      "FrontendTaskDefinitionTaskRole0DD17CB3",
      "Arn"
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "SpaceXFullStack/FrontendTaskDefinition/Resource"
   }
  },
  "FrontendTaskDefinitionFrontendContainerLogGroup994ED50C": {
   "Type": "AWS::Logs::LogGroup",
   "UpdateReplacePolicy": "Retain",
   "DeletionPolicy": "Retain",
   "Metadata": {
    "aws:cdk:path": "SpaceXFullStack/FrontendTaskDefinition/FrontendContainer/LogGroup/Resource"
   }
  },
  "LoadBalancerBE9EEC3A": {
   "Type": "AWS::ElasticLoadBalancingV2::LoadBalancer",
   "Properties": {
    "LoadBalancerAttributes": [
     {
      "Key": "deletion_protection.enabled",
      "Value": "false"
     }
    ],
    "Scheme": "internet-facing",
    "SecurityGroups": [
     {
      "Fn::GetAtt": [
       "LoadBalancerSecurityGroupA28D6DD7",
       "GroupId"
      ]
     }
    ],
    "Subnets": [
     {
      "Ref": "AppVPCPublicSubnet1Subnet5EAE38B2"
     },
     {
      "Ref": "AppVPCPublicSubnet2Subnet19F05CAF"
     }
    ],
    "Type": "application"
   },
   "DependsOn": [
    "AppVPCPublicSubnet1DefaultRoute51A04DF7",
    "AppVPCPublicSubnet1RouteTableAssociation10038102",
    "AppVPCPublicSubnet2DefaultRouteC200D8E4",
    "AppVPCPublicSubnet2RouteTableAssociationDB170019"
   ],
   "Metadata": {
    "aws:cdk:path": "SpaceXFullStack/LoadBalancer/Resource"
   }
  },
  "LoadBalancerSecurityGroupA28D6DD7": {
   "Type": "AWS::EC2::SecurityGroup",
   "Properties": {
    "GroupDescription": "Automatically created Security Group for ELB SpaceXFullStackLoadBalancerE0DCB649",
    "SecurityGroupIngress": [
     {
      "CidrIp": "0.0.0.0/0",
      "Description": "Allow from anyone on port 8000",
      "FromPort": 8000,
      "IpProtocol": "tcp",
      "ToPort": 8000
     },
     {
      "CidrIp": "0.0.0.0/0",
      "Description": "Allow from anyone on port 80",
      "FromPort": 80,
      "IpProtocol": "tcp",
      "ToPort": 80
     }
    ],
    "VpcId": {
     "Ref": "AppVPCB7733741"
    }
   },
   "Metadata": {
    "aws:cdk:path": "SpaceXFullStack/LoadBalancer/SecurityGroup/Resource"
   }
  },
  "LoadBalancerSecurityGrouptoSpaceXFullStackBackendServiceSecurityGroup23D94AA2800008883BB5": {
   "Type": "AWS::EC2::SecurityGroupEgress",
   "Properties": {
    "Description": "Load balancer to target",
    "DestinationSecurityGroupId": {
     "Fn::GetAtt": [
      "BackendServiceSecurityGroup0865F57D",
      "GroupId"
     ]
    },
    "FromPort": 8000,
    "GroupId": {
     "Fn::GetAtt": [
      "LoadBalancerSecurityGroupA28D6DD7",
      "GroupId"
     ]
    },
    "IpProtocol": "tcp",
    "ToPort": 8000
   },
   "Metadata": {
    "aws:cdk:path": "SpaceXFullStack/LoadBalancer/SecurityGroup/to SpaceXFullStackBackendServiceSecurityGroup23D94AA2:8000"
   }
  },
  "LoadBalancerSecurityGrouptoSpaceXFullStackFrontendServiceSecurityGroup355C1B228009311808": {
   "Type": "AWS::EC2::SecurityGroupEgress",
   "Properties": {
    "Description": "Load balancer to target",
    "DestinationSecurityGroupId": {
     "Fn::GetAtt": [
      "FrontendServiceSecurityGroup85470DEC",
      "GroupId"
     ]
    },
    "FromPort": 80,
    "GroupId": {
     "Fn::GetAtt": [
      "LoadBalancerSecurityGroupA28D6DD7",
      "GroupId"
     ]
    },
    "IpProtocol": "tcp",
    "ToPort": 80
   },
   "Metadata": {
    "aws:cdk:path": "SpaceXFullStack/LoadBalancer/SecurityGroup/to SpaceXFullStackFrontendServiceSecurityGroup355C1B22:80"
   }
  },
  "LoadBalancerBackendListenerFBC01A08": {
   "Type": "AWS::ElasticLoadBalancingV2::Listener",
   "Properties": {
    "DefaultActions": [
     {
      "TargetGroupArn": {
       "Ref": "BackendTargetGroupECF98930"
      },
      "Type": "forward"
     }
    ],
    "LoadBalancerArn": {
     "Ref": "LoadBalancerBE9EEC3A"
    },
    "Port": 8000,
    "Protocol": "HTTP"
   },
   "Metadata": {
    "aws:cdk:path": "SpaceXFullStack/LoadBalancer/BackendListener/Resource"
   }
  },
  "LoadBalancerFrontendListener5DEC725D": {
   "Type": "AWS::ElasticLoadBalancingV2::Listener",
   "Properties": {
    "DefaultActions": [
     {
      "TargetGroupArn": {
       "Ref": "FrontendTargetGroupED7B3E5D"
      },
      "Type": "forward"
     }
    ],
    "LoadBalancerArn": {
     "Ref": "LoadBalancerBE9EEC3A"
    },
    "Port": 80,
    "Protocol": "HTTP"
   },
   "Metadata": {
    "aws:cdk:path": "SpaceXFullStack/LoadBalancer/FrontendListener/Resource"
   }
  },
  "BackendService7A4224EE": {
   "Type": "AWS::ECS::Service",
   "Properties": {
    "Cluster": {
     "Ref": "AppCluster99B78AC1"
    },
    "DeploymentConfiguration": {
     "Alarms": {
      "AlarmNames": [],
      "Enable": false,
      "Rollback": false
     },
     "MaximumPercent": 200,
     "MinimumHealthyPercent": 50
    },
    "DesiredCount": 1,
    "EnableECSManagedTags": false,
    "HealthCheckGracePeriodSeconds": 180,
    "LaunchType": "FARGATE",
    "LoadBalancers": [
     {
      "ContainerName": "BackendContainer",
      "ContainerPort": 8000,
      "TargetGroupArn": {
       "Ref": "BackendTargetGroupECF98930"
      }
     }
    ],
    "NetworkConfiguration": {
     "AwsvpcConfiguration": {
      "AssignPublicIp": "ENABLED",
      "SecurityGroups": [
       {
        "Fn::GetAtt": [
         "BackendServiceSecurityGroup0865F57D",
         "GroupId"
        ]
       }
      ],
      "Subnets": [
       {
        "Ref": "AppVPCPublicSubnet1Subnet5EAE38B2"
       },
       {
        "Ref": "AppVPCPublicSubnet2Subnet19F05CAF"
       }
      ]
     }
    },
    "TaskDefinition": {
     "Ref": "BackendTaskDefinitionEC224DE6"
    }
   },
   "DependsOn": [
    "BackendTaskRoleDefaultPolicyD82ED08E",
    "BackendTaskRole65DD5890",
    "LoadBalancerBackendListenerFBC01A08"
   ],
   "Metadata": {
    "aws:cdk:path": "SpaceXFullStack/BackendService/Service"
   }
  },
  "BackendServiceSecurityGroup0865F57D": {
   "Type": "AWS::EC2::SecurityGroup",
   "Properties": {
    "GroupDescription": "SpaceXFullStack/BackendService/SecurityGroup",
    "SecurityGroupEgress": [
     {
      "CidrIp": "0.0.0.0/0",
      "Description": "Allow all outbound traffic by default",
      "IpProtocol": "-1"
     }
    ],
    "VpcId": {
     "Ref": "AppVPCB7733741"
    }
   },
   "DependsOn": [
    "BackendTaskRoleDefaultPolicyD82ED08E",
    "BackendTaskRole65DD5890"
   ],
   "Metadata": {
    "aws:cdk:path": "SpaceXFullStack/BackendService/SecurityGroup/Resource"
   }
  },
  "BackendServiceSecurityGroupfromSpaceXFullStackLoadBalancerSecurityGroup2B9DBB5D800065F20149": {
   "Type": "AWS::EC2::SecurityGroupIngress",
   "Properties": {
    "Description": "Load balancer to target",
    "FromPort": 8000,
    "GroupId": {
     "Fn::GetAtt": [
      "BackendServiceSecurityGroup0865F57D",
      "GroupId"
     ]
    },
    "IpProtocol": "tcp",
    "SourceSecurityGroupId": {
     "Fn::GetAtt": [
      "LoadBalancerSecurityGroupA28D6DD7",
      "GroupId"
     ]
    },
    "ToPort": 8000
   },
   "DependsOn": [
    "BackendTaskRoleDefaultPolicyD82ED08E",
    "BackendTaskRole65DD5890"
   ],
   "Metadata": {
    "aws:cdk:path": "SpaceXFullStack/BackendService/SecurityGroup/from SpaceXFullStackLoadBalancerSecurityGroup2B9DBB5D:8000"
   }
  },
  "FrontendServiceBC94BA93": {
   "Type": "AWS::ECS::Service",
   "Properties": {
    "Cluster": {
     "Ref": "AppCluster99B78AC1"
    },
    "DeploymentConfiguration": {
     "Alarms": {
      "AlarmNames": [],
      "Enable": false,
      "Rollback": false
     },
     "MaximumPercent": 200,
     "MinimumHealthyPercent": 50
    },
    "DesiredCount": 1,
    "EnableECSManagedTags": false,
    "HealthCheckGracePeriodSeconds": 120,
    "LaunchType": "FARGATE",
    "LoadBalancers": [
     {
      "ContainerName": "FrontendContainer",
      "ContainerPort": 80,
      "TargetGroupArn": {
       "Ref": "FrontendTargetGroupED7B3E5D"
      }
     }
    ],
    "NetworkConfiguration": {
     "AwsvpcConfiguration": {
      "AssignPublicIp": "ENABLED",
      "SecurityGroups": [
       {
        "Fn::GetAtt": [
         "FrontendServiceSecurityGroup85470DEC",
         "GroupId"
        ]
       }
      ],
      "Subnets": [
       {
        "Ref": "AppVPCPublicSubnet1Subnet5EAE38B2"
       },
       {
        "Ref": "AppVPCPublicSubnet2Subnet19F05CAF"
       }
      ]
     }
    },
    "TaskDefinition": {
     "Ref": "FrontendTaskDefinition6CBC2B00"
    }
   },
   "DependsOn": [
    "FrontendTaskDefinitionTaskRole0DD17CB3",
    "LoadBalancerFrontendListener5DEC725D"
   ],
   "Metadata": {
    "aws:cdk:path": "SpaceXFullStack/FrontendService/Service"
   }
  },
  "FrontendServiceSecurityGroup85470DEC": {
   "Type": "AWS::EC2::SecurityGroup",
   "Properties": {
    "GroupDescription": "SpaceXFullStack/FrontendService/SecurityGroup",
    "SecurityGroupEgress": [
     {
      "CidrIp": "0.0.0.0/0",
      "Description": "Allow all outbound traffic by default",
      "IpProtocol": "-1"
     }
    ],
    "VpcId": {
     "Ref": "AppVPCB7733741"
    }
   },
   "DependsOn": [
    "FrontendTaskDefinitionTaskRole0DD17CB3"
   ],
   "Metadata": {
    "aws:cdk:path": "SpaceXFullStack/FrontendService/SecurityGroup/Resource"
   }
  },
  "FrontendServiceSecurityGroupfromSpaceXFullStackLoadBalancerSecurityGroup2B9DBB5D80E6B4B063": {
   "Type": "AWS::EC2::SecurityGroupIngress",
   "Properties": {
    "Description": "Load balancer to target",
    "FromPort": 80,
    "GroupId": {
     "Fn::GetAtt": [
      "FrontendServiceSecurityGroup85470DEC",
      "GroupId"
     ]
    },
    "IpProtocol": "tcp",
    "SourceSecurityGroupId": {
     "Fn::GetAtt": [
      "LoadBalancerSecurityGroupA28D6DD7",
      "GroupId"
     ]
    },
    "ToPort": 80
   },
   "DependsOn": [
    "FrontendTaskDefinitionTaskRole0DD17CB3"
   ],
   "Metadata": {
    "aws:cdk:path": "SpaceXFullStack/FrontendService/SecurityGroup/from SpaceXFullStackLoadBalancerSecurityGroup2B9DBB5D:80"
   }
  },
  "BackendTargetGroupECF98930": {
   "Type": "AWS::ElasticLoadBalancingV2::TargetGroup",
   "Properties": {
    "HealthCheckIntervalSeconds": 60,
    "HealthCheckPath": "/health/",
    "Port": 8000,
    "Protocol": "HTTP",
    "TargetGroupAttributes": [
     {
      "Key": "stickiness.enabled",
      "Value": "false"
     }
    ],
    "TargetType": "ip",
    "VpcId": {
     "Ref": "AppVPCB7733741"
    }
   },
   "Metadata": {
    "aws:cdk:path": "SpaceXFullStack/BackendTargetGroup/Resource"
   }
  },
  "FrontendTargetGroupED7B3E5D": {
   "Type": "AWS::ElasticLoadBalancingV2::TargetGroup",
   "Properties": {
    "Port": 80,
    "Protocol": "HTTP",
    "TargetGroupAttributes": [
     {
      "Key": "stickiness.enabled",
      "Value": "false"
     }
    ],
    "TargetType": "ip",
    "VpcId": {
     "Ref": "AppVPCB7733741"
    }
   },
   "Metadata": {
    "aws:cdk:path": "SpaceXFullStack/FrontendTargetGroup/Resource"
   }
  },
  "CDKMetadata": {
   "Type": "AWS::CDK::Metadata",
   "Properties": {
    "Analytics": "v2:deflate64:H4sIAAAAAAAA/31S0W7bMAz8lr4r6pJ8QZKuRYACC5yirwUtsy4XWzJEKkEg+N8LyXbibcCeeDyeRB6llV6ul/rHA1x4YarToqFSx6OAOSm48EesrhZaV5U6vkHZoNp92gx61UBbVqDjc7BGyNlUmuMD+paYydleEbQ6Fm44n+PBNWSuWZdRr3j9AcworDcpKF7rbTAnlC0wKjyjFdaxCOMlIc2AZqXje2cS837YqUMoGzLHUFqUxN1R4YLgzcLA37kNszME0+i5kMDeCnqL8gKCF7iObcZsIwLmq0Ur6ogmeJLri3ehyw3+S/ysPTL/Q+9t5pMtr2OBnWMS53PbWXaHaTNJzTrumsCCPkkn+Ay+hmSQT0/4SZYme38zzgqQRT/jxrNH9Gcyw8oGmIebHurJmRP6fQs1Dm/WuJp1fHX1zfeEe4UNsJBpHFQlNGAN2fq80nHTdQ2ZvPtXB9U21wYnf+RzHbGgHTUTntXfwNcotxlmad+rAtkFb1DlkY8CNdk6yX4F6cLwWUZJrw5X+XL2ca2XK71++M1ECx+sUIu6GOI3Ohr0v0EDAAA="
   },
   "Metadata": {
    "aws:cdk:path": "SpaceXFullStack/CDKMetadata/Default"
   }
  }
 },
 "Outputs": {
  "BackendRepositoryUri": {
   "Value": {
    "Fn::Join": [
     "",
     [
      {
       "Fn::Select": [
        4,
        {
         "Fn::Split": [
          ":",
          {
           "Fn::GetAtt": [
            "BackendRepository9B711290",
            "Arn"
           ]
          }
         ]
        }
       ]
      },
      ".dkr.ecr.",
      {
       "Fn::Select": [
        3,
        {
         "Fn::Split": [
          ":",
          {
           "Fn::GetAtt": [
            "BackendRepository9B711290",
            "Arn"
           ]
          }
         ]
        }
       ]
      },
      ".",
      {
       "Ref": "AWS::URLSuffix"
      },
      "/",
      {
       "Ref": "BackendRepository9B711290"
      }
     ]
    ]
   }
  },
  "FrontendRepositoryUri": {
   "Value": {
    "Fn::Join": [
     "",
     [
      {
       "Fn::Select": [
        4,
        {
         "Fn::Split": [
          ":",
          {
           "Fn::GetAtt": [
            "FrontendRepository7D714FA2",
            "Arn"
           ]
          }
         ]
        }
       ]
      },
      ".dkr.ecr.",
      {
       "Fn::Select": [
        3,
        {
         "Fn::Split": [
          ":",
          {
           "Fn::GetAtt": [
            "FrontendRepository7D714FA2",
            "Arn"
           ]
          }
         ]
        }
       ]
      },
      ".",
      {
       "Ref": "AWS::URLSuffix"
      },
      "/",
      {
       "Ref": "FrontendRepository7D714FA2"
      }
     ]
    ]
   }
  },
  "LoadBalancerDNS": {
   "Value": {
    "Fn::GetAtt": [
     "LoadBalancerBE9EEC3A",
     "DNSName"
    ]
   }
  },
  "FrontendURL": {
   "Value": {
    "Fn::Join": [
     "",
     [
      "http://",
      {
       "Fn::GetAtt": [
        "LoadBalancerBE9EEC3A",
        "DNSName"
       ]
      }
     ]
    ]
   }
  },
  "BackendURL": {
   "Value": {
    "Fn::Join": [
     "",
     [
      "http://",
      {
       "Fn::GetAtt": [
        "LoadBalancerBE9EEC3A",
        "DNSName"
       ]
      },
      ":8000"
     ]
    ]
   }
  },
  "SwaggerURL": {
   "Value": {
    "Fn::Join": [
     "",
     [
      "http://",
      {
       "Fn::GetAtt": [
        "LoadBalancerBE9EEC3A",
        "DNSName"
       ]
      },
      ":8000/swagger/"
     ]
    ]
   }
  },
  "TableName": {
   "Value": {
    "Ref": "SpaceXLaunchesTableA86A4AE4"
   }
  },
  "LambdaFunctionName": {
   "Value": {
    "Ref": "SpaceXDataProcessor565DFC9E"
   }
  }
 },
 "Parameters": {
  "BootstrapVersion": {
   "Type": "AWS::SSM::Parameter::Value<String>",
   "Default": "/cdk-bootstrap/hnb659fds/version",
   "Description": "Version of the CDK Bootstrap resources in this environment, automatically retrieved from SSM Parameter Store. [cdk:skip]"
  }
 },
 "Rules": {
  "CheckBootstrapVersion": {
   "Assertions": [
    {
     "Assert": {
      "Fn::Not": [
       {
        "Fn::Contains": [
         [
          "1",
          "2",
          "3",
          "4",
          "5"
         ],
         {
          "Ref": "BootstrapVersion"
         }
        ]
       }
      ]
     },
     "AssertDescription": "CDK bootstrap stack version 6 required. Please run 'cdk bootstrap' with a recent version of the CDK CLI."
    }
   ]
  }
 }
}